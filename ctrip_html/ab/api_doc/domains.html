<!DOCTYPE html>
<html>
<head>

<title>域模型 </title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<script type="text/javascript" src="../../js/jquery-1.6.4.min.js"></script>

<link rel="Stylesheet" type="text/css" href="../../js/sh/styles/shCore.css">
<link rel="Stylesheet" type="text/css" href="../../js/sh/styles/shThemeRDark.css">
<script type="text/javascript" src="../../js/sh/scripts/shCore.js"></script>
<script type="text/javascript" src="../../js/sh/scripts/shAutoloader.js"></script>

<script type="text/javascript" src="../../js/main.js"></script>

<link rel="Stylesheet" type="text/css" href="../../style.css">
<link rel="Stylesheet" type="text/css" href="../../css/main.css">

</head>
<body>
	<div class="hidden">
		<input id="root_path" type="text" value="../../">
	</div>
	<div id="body-wrapper">
		<div id="container">
			<div id="top">
				<div id="page-title">
					<a href="../../index.html">CTRIP</a>
				</div>
				<ul id="top-nav">
				</ul>
			</div>
			<div id="middle">
				


<p>
=域模型=
</p>

<div class="toc">
<ul>
<li><a href="#toc_1">Property</a>
<ul>
<li><a href="#toc_1.1">描述</a>
<li><a href="#toc_1.2">组成</a>
<li><a href="#toc_1.3">例子</a>
</ul>
<li><a href="#toc_2">RuleType</a>
<ul>
<li><a href="#toc_2.1">描述</a>
<li><a href="#toc_2.2">组成</a>
<li><a href="#toc_2.3">资源地址</a>
<li><a href="#toc_2.4">例子</a>
</ul>
<li><a href="#toc_3">Experiment</a>
<ul>
<li><a href="#toc_3.1">描述</a>
<li><a href="#toc_3.2">组成</a>
<li><a href="#toc_3.3">资源地址</a>
<li><a href="#toc_3.4">例子</a>
</ul>
<li><a href="#toc_4">Alternative</a>
<ul>
<li><a href="#toc_4.1">描述</a>
<li><a href="#toc_4.2">组成</a>
<ul>
<li><a href="#toc_4.2.1">内部对象ruleParams</a>
</ul>
<li><a href="#toc_4.3">资源地址</a>
<li><a href="#toc_4.4">例子</a>
</ul>
</ul>
</div>
<h1 id="toc_1">Property</h1>

<h2 id="toc_1.1">描述</h2>
<p>
键值对，值对象，用于扩展其他对象信息
</p>

<h2 id="toc_1.2">组成</h2>
<table>
<tr>
<th>
成员
</th>
<th>
类型
</th>
<th>
约束
</th>
<th>
描述
</th>
</tr>
<tr>
<td>
name
</td>
<td>
String
</td>
<td>
Required,Unique(在一个对象内)
</td>
<td>
属性名
</td>
</tr>
<tr>
<td>
value
</td>
<td>
String
</td>
<td>
Optional
</td>
<td>
属性值 
</td>
</tr>
</table>

<h2 id="toc_1.3">例子</h2>
<ul>
<li>
XML:
<pre  class="brush:xml">
 &lt;property&gt;
     &lt;name&gt;pageId&lt;/name&gt;
     &lt;value&gt;No001&lt;/value&gt;
 &lt;/property&gt;
</pre>

<li>
JSON:
<pre  class="brush:js">

  {
     "name": "pageId",
     "value": "No001"
  },
</pre>

</ul>

<h1 id="toc_2">RuleType</h1>

<h2 id="toc_2.1">描述</h2>
<p>
分流规则， 挂在Experiment上。比如按百分比分流。
</p>

<h2 id="toc_2.2">组成</h2>
<table>
<tr>
<th>
成员
</th>
<th>
类型
</th>
<th>
约束
</th>
<th>
描述
</th>
</tr>
<tr>
<td>
code
</td>
<td>
String(字符，数字，连字符，下划线）
</td>
<td>
Required,Unique
</td>
<td>
规则唯一性标识， 最好具有语义，可读
</td>
</tr>
<tr>
<td>
description
</td>
<td>
String
</td>
<td>
Optional
</td>
<td>
用于描述些规则 
</td>
</tr>
</table>

<h2 id="toc_2.3">资源地址</h2>
<ol>
<li>
<a href="rule-types_get.html">/ab/rule-types GET</a> 列出所有的<code>RupeType</code>

<li>
<a href="rule-types_id_get.html">/ab/rule-types/{code} GET</a> 获取指定的 <code>RupeType</code>

</ol>

<h2 id="toc_2.4">例子</h2>
<ul>
<li>
XML:
<pre  class="brush:xml">
    &lt;?xml version="1.0" encoding="UTF-8"?&gt;
    &lt;ruleType&gt;
       &lt;url&gt;http://localhost:8080/ab-service/rule-types/PERSENT&lt;/url&gt;
       &lt;code&gt;PERSENT&lt;/code&gt;
       &lt;description&gt;The users fork by percentage&lt;/description&gt;
    &lt;/ruleType&gt;
</pre>

<li>
JSON:
<pre  class="brush:js">
  {
      "url": "http://localhost:8080/ab-service/rule-types/PERSENT",
      "code": "PERSENT",
      "description": "The users fork by percentage"
   }
</pre>

</ul>

<h1 id="toc_3">Experiment</h1>

<h2 id="toc_3.1">描述</h2>
<p>
代表一个AB测试
</p>

<h2 id="toc_3.2">组成</h2>
<table>
<tr>
<th>
成员
</th>
<th>
类型
</th>
<th>
约束
</th>
<th>
描述
</th>
</tr>
<tr>
<td>
code
</td>
<td>
String(字符，数字，连字符，下划线）
</td>
<td>
Required,Unique
</td>
<td>
这个ab测试唯一性标识， 最好具有语义，可读
</td>
</tr>
<tr>
<td>
name
</td>
<td>
String
</td>
<td>
Optional
</td>
<td>
一个简短的名称
</td>
</tr>
<tr>
<td>
description
</td>
<td>
String
</td>
<td>
Optional
</td>
<td>
用于描述些规则 
</td>
</tr>
<tr>
<td>
startDate
</td>
<td>
Date(yyyy-mm-dd HH:MM)
</td>
<td>
Required
</td>
<td>
测试开始的时间
</td>
</tr>
<tr>
<td>
endDate
</td>
<td>
Date(yyyy-mm-dd HH:MM)
</td>
<td>
Required
</td>
<td>
测试结束的时间 
</td>
</tr>
<tr>
<td>
isActive
</td>
<td>
boolean(true,false)
</td>
<td>
Required
</td>
<td>
测试是否激活 
</td>
</tr>
<tr>
<td>
ruleType
</td>
<td>
<a href="\#toc_2.html">RuleType</a>
</td>
<td>
Required
</td>
<td>
测试使用的分流规则 
</td>
</tr>
<tr>
<td>
properties
</td>
<td>
List&lt;<a href="\#toc_2.html">Property</a>&gt;
</td>
<td>
Optional
</td>
<td>
用于存储扩展信息，每个成员是一个name value对 
</td>
</tr>
<tr>
<td>
alternatives
</td>
<td>
List&lt;<a href="\#toc_2.html">Alternative</a>&gt;
</td>
<td>
Required
</td>
<td>
测试所包含的方案，至少含一个 
</td>
</tr>
</table>

<h2 id="toc_3.3">资源地址</h2>
<ol>
<li>
<a href="api_doc/experiments_post.html">/ab/experiments POST</a> 新建一个 <code>Experiment</code>

<li>
<a href="api_doc/experiments_get.html">/ab/experiments GET</a> 列出所有的<code>Experiment</code>

<li>
<a href="api_doc/experiments_id_get.html">/ab/experiments/{code} GET</a> 获取指定的 <code>Experiment</code>

<li>
<a href="api_doc/experiments_id_put.html">/ab/experiments/{code} PUT</a> 刷新整个<code>Experiment</code>

</ol>

<h2 id="toc_3.4">例子</h2>
<ul>
<li>
XML:
<pre  class="brush:xml">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;experiment&gt;
   &lt;url&gt;http://localhost:8080/ab-service/experiments/HOTEL_HOME_PAGE_BANNER906453e3-5f86-48d3-a093-de8dee183e74&lt;/url&gt;
   &lt;code&gt;HOTEL_HOME_PAGE_BANNER906453e3-5f86-48d3-a093-de8dee183e74&lt;/code&gt;
   &lt;name&gt;Test of the login page.&lt;/name&gt;
   &lt;description&gt;Test of the login page.&lt;/description&gt;
   &lt;startDate&gt;2012-10-25 00:00&lt;/startDate&gt;
   &lt;endDate&gt;2012-10-25 00:00&lt;/endDate&gt;
   &lt;isActive&gt;true&lt;/isActive&gt;
   &lt;ruleType&gt;
      &lt;url&gt;http://localhost:8080/ab-service/rule-types/PERSENT&lt;/url&gt;
      &lt;code&gt;PERSENT&lt;/code&gt;
      &lt;description&gt;The users fork by percentage&lt;/description&gt;
   &lt;/ruleType&gt;
   &lt;properties /&gt;
   &lt;alternatives /&gt;
&lt;/experiment&gt;
</pre>

<li>
JSON:
<pre  class="brush:js">
{
   "url": "http://localhost:8080/ab-service/experiments/HOTEL_HOME_PAGE_BANNER906453e3-5f86-48d3-a093-de8dee183e74",
   "code": "HOTEL_HOME_PAGE_BANNER906453e3-5f86-48d3-a093-de8dee183e74",
   "name": "Test of the login page.",
   "description": "Test of the login page.",
   "startDate": "2012-10-25 00:00",
   "endDate": "2012-10-25 00:00",
   "isActive": true,
   "ruleType": {
      "url": "http://localhost:8080/ab-service/rule-types/PERSENT",
      "code": "PERSENT",
      "description": "The users fork by percentage"
   },
   "properties": [ ... ],
   "alternatives": [ ... ]
}
</pre>

</ul>

<h1 id="toc_4">Alternative</h1>

<h2 id="toc_4.1">描述</h2>
<p>
一个AB测试的一个方案
</p>

<h2 id="toc_4.2">组成</h2>
<p>
===直接成员：===
<table>
<tr>
<th>
成员
</th>
<th>
类型
</th>
<th>
约束
</th>
<th>
描述
</th>
</tr>
<tr>
<td>
code
</td>
<td>
Enum(A_A, A_B, A_C .... A_Z)
</td>
<td>
Required
</td>
<td>
唯一性标识 
</td>
</tr>
<tr>
<td>
name
</td>
<td>
String
</td>
<td>
Optional
</td>
<td>
一个简短的名称
</td>
</tr>
<tr>
<td>
description
</td>
<td>
String
</td>
<td>
Optional
</td>
<td>
详细描述
</td>
</tr>
<tr>
<td>
isActive
</td>
<td>
boolean(true,false)
</td>
<td>
Required
</td>
<td>
测试是否激活 
</td>
</tr>
<tr>
<td>
ruleParams
</td>
<td>
<a href="\#toc_2.html">ruleParams</a>
</td>
<td>
Required
</td>
<td>
该方案的分流参数
</td>
</tr>
<tr>
<td>
properties
</td>
<td>
List&lt;<a href="\#toc_2.html">Property</a>&gt;
</td>
<td>
Optional
</td>
<td>
用于存储扩展信息，每个成员是一个name value对 
</td>
</tr>
</table>
</p>

<h3 id="toc_4.2.1">内部对象ruleParams</h3>
<p>
设置方案的分流参数，预留九个位置，具体的使用依赖于采用的分流规则
</p>

<table>
<tr>
<th>
成员
</th>
<th>
类型
</th>
<th>
约束
</th>
<th>
描述
</th>
</tr>
<tr>
<td>
param1
</td>
<td>
String
</td>
<td>
Optional
</td>
<td>
参数值 
</td>
</tr>
<tr>
<td>
param2
</td>
<td>
String
</td>
<td>
Optional
</td>
<td>
参数值 
</td>
</tr>
<tr>
<td>
param3
</td>
<td>
String
</td>
<td>
Optional
</td>
<td>
参数值 
</td>
</tr>
<tr>
<td>
param4
</td>
<td>
String
</td>
<td>
Optional
</td>
<td>
参数值 
</td>
</tr>
<tr>
<td>
param5
</td>
<td>
String
</td>
<td>
Optional
</td>
<td>
参数值 
</td>
</tr>
<tr>
<td>
param6
</td>
<td>
String
</td>
<td>
Optional
</td>
<td>
参数值 
</td>
</tr>
<tr>
<td>
param7
</td>
<td>
String
</td>
<td>
Optional
</td>
<td>
参数值 
</td>
</tr>
<tr>
<td>
param8
</td>
<td>
String
</td>
<td>
Optional
</td>
<td>
参数值 
</td>
</tr>
<tr>
<td>
param9
</td>
<td>
String
</td>
<td>
Optional
</td>
<td>
参数值 
</td>
</tr>
</table>

<h2 id="toc_4.3">资源地址</h2>

<h2 id="toc_4.4">例子</h2>
<ul>
<li>
XML:
<pre  class="brush:xml">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;alternative&gt;
   &lt;code&gt;A_A&lt;/code&gt;
   &lt;name&gt;A1&lt;/name&gt;
   &lt;description&gt;A1 desp.&lt;/description&gt;
   &lt;isActive&gt;true&lt;/isActive&gt;
   &lt;ruleParams&gt;
      &lt;param1&gt;a1p1&lt;/param1&gt;
   &lt;/ruleParams&gt;
   &lt;properties&gt;
      &lt;property&gt;
         &lt;name&gt;a&lt;/name&gt;
         &lt;value&gt;a&lt;/value&gt;
      &lt;/property&gt;
   &lt;/properties&gt;
&lt;/alternative&gt;

</pre>

<li>
JSON:
<pre  class="brush:js">

  {
     "code": "A_A",
     "name": "A1",
     "description": "A1 desp.",
     "isActive": true,
     "ruleParams": {
        "param1": "a1p1",
        "param2": null,
        "param3": null,
        "param4": null,
        "param5": null,
        "param6": null,
        "param7": null,
        "param8": null,
        "param9": null
     },
     "properties": [
        {
           "name": "a",
           "value": "a"
        }
     ]
  },
}
</pre>

</ul>
  
<pre  class="brush:java">
//Specify the experiment code
String experimentCode = "20121001_HOTEL_HOMEPAGE_NEW_VERSION_1";

//Get the alternative which the current user should visit
AlternativeEnum result = ExperimentClient.GetAlternative(this.Context, experimentCode);

//Build the page content by the alternative code.
swith(result){
    case AlternativeEnum.A:
        return buildPageA();

    case AlternativeEnum.B:
        return buildPageB();

    default:  
        return buildPageA();
}
</pre>

			</div>

			<div id="bottom">
				&copy; 2012 王兴朝
			</div>
		</div>
	<div>
</body>
</html>
