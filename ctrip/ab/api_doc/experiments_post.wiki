%title /ab/experiments POST 新建一个的测试

=/ab/experiments POST=
%toc

==功能 ==
新建一`Experiment`实例

==URL==
/ab/experiments

==HTTP请求方式==
POST

==请求类型==
JSON XML

==请求参数==

传输一个 `Experiment` 完整的XML或JSON的描述

===XML参数 ===
{{{ class="brush:xml"
<?xml version="1.0" encoding="UTF-8"?>
<experiment>
   <url>http://localhost:8080/ab-service/experiments/HOTEL_HOME_PAGE_BANNER906453e3-5f86-48d3-a093-de8dee183e74</url>
   <code>HOTEL_HOME_PAGE_BANNER906453e3-5f86-48d3-a093-de8dee183e74</code>
   <name>Test of the login page.</name>
   <description>Test of the login page.</description>
   <startDate>2012-10-25 00:00</startDate>
   <endDate>2012-10-25 00:00</endDate>
   <isActive>true</isActive>
   <ruleType>
      <url>http://localhost:8080/ab-service/rule-types/PERSENT</url>
      <code>PERSENT</code>
      <description>The users fork by percentage</description>
   </ruleType>
   <properties>
      <property>
         <name>a</name>
         <value>a</value>
      </property>
      <property>
         <name>b</name>
         <value>b</value>
      </property>
      <property>
         <name>c</name>
         <value>c</value>
      </property>
      <property>
         <name>d</name>
         <value>d</value>
      </property>
   </properties>
   <alternatives>
      <alternative>
         <code>A_A</code>
         <name>A1</name>
         <description>A1 desp.</description>
         <isActive>true</isActive>
         <ruleParams>
            <param1>a1p1</param1>
         </ruleParams>
         <properties>
            <property>
               <name>a</name>
               <value>a</value>
            </property>
         </properties>
      </alternative>
      <alternative>
         <code>A_B</code>
         <name>B1</name>
         <description>B1 desp.</description>
         <isActive>true</isActive>
         <ruleParams>
            <param1>a2p1</param1>
         </ruleParams>
         <properties>
            <property>
               <name>a</name>
               <value>a</value>
            </property>
         </properties>
      </alternative>
   </alternatives>
</experiment>

  }}}
  
=== JSON 参数 ===
{{{ class="brush:js"
{
   "url": "http://localhost:8080/ab-service/experiments/HOTEL_HOME_PAGE_BANNER906453e3-5f86-48d3-a093-de8dee183e74",
   "code": "HOTEL_HOME_PAGE_BANNER906453e3-5f86-48d3-a093-de8dee183e74",
   "name": "Test of the login page.",
   "description": "Test of the login page.",
   "startDate": "2012-10-25 00:00",
   "endDate": "2012-10-25 00:00",
   "isActive": true,
   "ruleType": {
      "url": "http://localhost:8080/ab-service/rule-types/PERSENT",
      "code": "PERSENT",
      "description": "The users fork by percentage"
   },
   "properties": [
      {
         "name": "a",
         "value": "a"
      },
      {
         "name": "b",
         "value": "b"
      },
      {
         "name": "c",
         "value": "c"
      },
      {
         "name": "d",
         "value": "d"
      }
   ],
   "alternatives": [
      {
         "code": "A_A",
         "name": "A1",
         "description": "A1 desp.",
         "isActive": true,
         "ruleParams": {
            "param1": "a1p1",
            "param2": null,
            "param3": null,
            "param4": null,
            "param5": null,
            "param6": null,
            "param7": null,
            "param8": null,
            "param9": null
         },
         "properties": [
            {
               "name": "a",
               "value": "a"
            }
         ]
      },
      {
         "code": "A_B",
         "name": "B1",
         "description": "B1 desp. ",
         "isActive": true,
         "ruleParams": {
            "param1": "a2p1",
            "param2": null,
            "param3": null,
            "param4": null,
            "param5": null,
            "param6": null,
            "param7": null,
            "param8": null,
            "param9": null
         },
         "properties": [
            {
               "name": "a",
               "value": "a"
            }
         ]
      }
   ]
}
  }}}

==返回结果==
| 状态 | 结果                                        |
|------|---------------------------------------------|
| 201  | 创建成功，Header Location里存放新资源的地址 |

==测试==
{{{ class="brush:bash"
curl -v -X post -HContent-type:application/xml --data "<xml data>" https://baseurl/experiments
curl -v -X post -HContent-type:application/json --data "<json data>" https://baseurl/experiments
  }}}
  
==Examples==
{{{ 
> post /ab-service/experiments HTTP/1.1
> User-Agent: curl/7.23.1 (x86_64-pc-win32) libcurl/7.23.1 OpenSSL/0.9.8r zlib/1.2.5
> Host: localhost:8080
> Accept: */*
> Content-Type:application/xml
> Content-Length: 283
>
* upload completely sent off: 283 out of 283 bytes
< HTTP/1.1 201 Created
< Location: http://localhost:8080/ab-service/experiments/HOTEL_HOME_PAGE_BANNER906453e3-5f86-48d3-a093-de8dee183e74
< Content-Length: 0
< Server: Jetty(6.1.24)
<
* Connection #0 to host localhost left intact
* Closing connection #0
  }}}

  






